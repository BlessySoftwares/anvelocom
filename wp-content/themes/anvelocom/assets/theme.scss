/* Special decorations for this site
*/




/* Display page content
*/
@mixin content {
  #body {
    @include block;
    @include body-text;
  }
  
  #comments {
    @include block;
    max-width: $body-text-width;
    margin: $pad 0;
    
    @include color(invert);
    padding: $pad;
    width: calc(100% - #{$pad*2});
    
    @include form;
    
    h3, h2 {
      margin-bottom: $pad;
    }
    
    ol {
      li {
        margin-bottom: $pad;
        padding-bottom: $pad;
        border-bottom: 1px solid $gray;
        
        @include body-text;
        
        a {
          @include link($highlight);
        }
        
        .reply {
          margin: $pad/2 0;
        }
        
        .vcard {
          display: none;
        }
      }
      
      &.children {
        margin: $pad;
      }
    }
    
    
    form {
      width: 60%;
      
      input, textarea {
        margin-bottom: $pad/2;
        
        &#submit {
          width: 15em;
        }
      }
    }
  }
}


/* The sidebar
*/
@mixin sidebar {
  @include bordered;
  padding: $pad*2;
  width: calc(#{$minor} - #{$pad*4} - 2px);
  @include ul;
  
  h3 {
    display: none;
  }
  
  ul {
    li {
      margin: $pad/2 0;
    }
  }
}



/* Display price
*/
@mixin price {
  li {
    &:nth-of-type(1) {
      font-weight: bold;
      margin-right: $pad/2;
    }
    
    &:nth-of-type(2) {
      text-decoration: line-through;
      margin-right: 0;
    }
  }
}


/* A white text on a black, opaque background
*/
@mixin black-background {
  position: relative;
  top: -$pad*2 - $pad/4;
  background: $background;
  display: inline-block;
  
  @include bordered;
  border-width: $pad/4;
  padding: $pad;
  @include color(invert);
  
  opacity: .9;
}



/* Highlight a text, even if it is a link
*/
@mixin highlight {
  color: $highlight;
  a {
    @include link($highlight);
  }
}


/* Add border to text
*/
@mixin bordered {
  padding: $pad/2;
  border: 1px solid;
}




html {
  body {
    .container {
      #header {
        h1 {
          @include bordered;
        }
        /* Nav must be adjusted to the bordered header
        */
        nav {
          margin-top: $pad - $pad/4;
        }
      }
      
      main {
        section {
          h2 {
            @include bordered;
            width: col-resize(col-width(5), $pad, 2px);   
            margin-bottom: $pad;
          }
          
          article {
            aside {
              #price {
                @include price;
              }
            }
          }
          
          &#intro {
            figure {
              figcaption {
                @include black-background;
              }
            }
            /* Figcaption has relative positioning with negative top margin 
            */
            margin-bottom: 0; 
          }
        }
      }
    }
  
    /* Archives
    */
    &.page {
      .container {
        main {
          section {
            h2 {
              width: col-resize(isotope-col-width(5), $pad, 2px);
            }
          
            &#filters {
              ul {
                li {
                  @include color(invert);
                  padding: $pad/4;
                  width: col-resize(isotope-col-width(5), $pad/2, 0px);
                }
              }
            }
          }
        }
      }
    }
    
    /* Single product
    */
    &.single-post {
      main {
        article.product {
          header {
            display: none;
          }
          
          figure {
            figcaption {
              display: none;
            }
          }
          
          
        }
        
        section {
          nav {
            h2 {
              width: col-resize(col-width(5), $pad, 2px);   
            }
          }
        }
      }
    }
    
    
    /* Content page
    */
    &.page {
      main {
        #content {
          article.page {
            @include content;
          }
          
          #sidebar {
            @include sidebar;
          }
        }
      }
    }
  
  }
}

